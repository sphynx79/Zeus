(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[,,function(t,e,a){"use strict";(function(t){a(60),a(16);e.a=class{constructor(){}view({attrs:e}){return t("li.bx--accordion__item[data-accordion-item='']",[t("button.bx--accordion__heading[aria-controls='pane1'][aria-expanded='false']",[t("svg.bx--accordion__arrow[fill-rule='evenodd'][height='12'][viewBox='0 0 8 12'][width='8']",t("path[d='M0 10.6L4.7 6 0 1.4 1.4 0l6.1 6-6.1 6z']")),t("p.bx--accordion__title.bx--type-epsilon",e.content_title)]),t(`.bx--accordion__content[id='${e.content_id}']`,t(e.content))])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";function i(t){for(var e=arguments.length,a=Array(e>1?e-1:0),i=1;i<e;i++)a[i-1]=arguments[i];return t.addEventListener.apply(t,a),{release:function(){return t.removeEventListener.apply(t,a),null}}}a.d(e,"a",(function(){return i}))},function(t,e,a){"use strict";(function(t){a(52);const i=a(51);e.a=class{constructor(){}view({attrs:e}){return t("select")}oncreate(t){let e=t.dom;t.select=new i(e,{searchable:!0,multiple:!0,clearable:!0,defaultSelected:!1,closeOnScroll:!1,placeholder:t.attrs.placeholder,data:t.attrs.data.get(),customClass:"custom-style",width:500});let a=document.querySelector(`${t.attrs.id}`);t.select.on("selectr.open",()=>{a&&a.style.setProperty("--space","16rem")}),t.select.on("selectr.close",()=>{a&&a.style.setProperty("--space","4rem")}),t.select.on("selectr.change",e=>{let a=t.select.getValue();t.attrs.onchange(a)}),t.attrs.data.react(e=>{t.select.removeAll(),t.select.add(e)})}}}).call(this,a(1))},function(t,e,a){"use strict";function i(t,e){var a=t.target,i=t.currentTarget;if("function"==typeof a.matches){if(a.matches(e))return a;if(a.matches(e+" *")){var n=a.closest(e);if((i.nodeType===Node.DOCUMENT_NODE?i.documentElement:i).contains(n))return n}}}a.d(e,"a",(function(){return i}))},,function(t,e,a){"use strict";var i=(function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}})();e.a=function(t){return (function(e){function a(){return (function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),(function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return (function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(a,t),i(a,null,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign(Object.create(this.options),a);if(e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.DOCUMENT_NODE)throw new TypeError("DOM document or DOM element should be given to search for and initialize this widget.");e.nodeType===Node.ELEMENT_NODE&&e.matches(i.selectorInit)?this.create(e,a):[].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(e.querySelectorAll(i.selectorInit))).forEach((function(e){return t.create(e,a)}))}}]),a})()}},function(t,e,a){"use strict";var i=(function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}})();e.a=function(t){return (function(e){function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a);var i=(function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,e));if(i.children=[],!t||t.nodeType!==Node.ELEMENT_NODE)throw new TypeError("DOM element should be given to initialize this widget.");return i.element=t,i.options=Object.assign(Object.create(i.constructor.options),e),i.constructor.components.set(i.element,i),i}return (function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(a,t),i(a,[{key:"release",value:function(){for(var t=this.children.pop();t;t=this.children.pop())t.release();return this.constructor.components.delete(this.element),null}}],[{key:"create",value:function(t,e){return this.components.get(t)||new this(t,e)}}]),a})()}},function(t,e,a){"use strict";function i(t){return t.reduce((function(t,e){return Array.isArray(e)?t.push.apply(t,(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)})(i(e))):t.push(e),t}),[])}function n(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return i(e).reduce((function(t,e){return e(t)}),(function(){return function t(){!(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t)}})())}a.d(e,"a",(function(){return n}))},function(t,e,a){"use strict";e.a={prefix:"bx"}},,function(t,e,a){"use strict";(function(t){a(58);e.a=class{constructor(){}view({attrs:e}){return t(".bx--checkbox-wrapper",[t(`input.bx--checkbox[id='${e.id}'][name='checkbox'][type='checkbox']`,{checked:e.checked,onchange:e.onchange}),t(`label.bx--checkbox-label[for='${e.id}']`,e.label)])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";var i=(function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}})();function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.a=function(t){return (function(e){function a(){var t,e,i;!(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=i=n(this,(t=a.__proto__||Object.getPrototypeOf(a)).call.apply(t,[this].concat(o))),i.handles=new Set,n(i,e)}return (function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(a,t),i(a,[{key:"manage",value:function(t){return this.handles.add(t),t}},{key:"unmanage",value:function(t){return this.handles.delete(t),t}},{key:"release",value:function(){var t=this;return this.handles.forEach((function(e){e.release(),t.handles.delete(e)})),(function t(e,a,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,a,i)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(i):void 0})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"release",this).call(this)}}]),a})()}},,function(t,e,a){"use strict";(function(t){a(65),a(0),a(64);e.a=class{constructor(){}oninit({attrs:e,state:a}){a.type=e.type,a.activeLine=-1,a.titolo=`TRANSMISSION ${e.volt}`,appState.$data.react(()=>a.activeLine=-1),"linee"==e.type?("380"==e.volt?appState.$remit_380:appState.$remit_220).react(e=>{a.remit=e.features,t.redraw()}):(a.titolo="Centrali",appState.$remitCentraliFiltered.react(e=>{a.remit=e,t.redraw()}))}view({attrs:e,state:a}){return 0!=a.remit.length?t(".tbl",[t(".tbl__header",[t("table",[t("caption",a.titolo),t(`thead.thead-${e.type}`,t("tr",this._header().map(e=>t("th",{class:e},e))))])]),t(".tbl__content[data-simplebar='']",[t("table",[t(`tbody.tbody-${e.type}`,this.remit.map((e,i)=>t("tr",a.row_attrs(e,i),a.row_values(e))))])])]):t("")}_clickRow(t,e){this.activeLine=e,"linee"==this.type?appState.$selectLine.set(t):appState.$selectCentrale.set(t)}_header(){return Object.keys(this.remit[0].properties)}row_attrs(t,e){return{key:e,className:this.activeLine===e?"active":"",onclick:()=>{this._clickRow(t,e)}}}row_values(e){var a=[];for(let[i,n]of Object.entries(e.properties))a.push(t("td",{class:i},n));return a}oncreate(t){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){a(61);var i=a(37),n=a(36),r=a(35);e.a=class{constructor(){}oninit({state:t}){let e=new Date;e.setDate(e.getDate()+1);let a=`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`;appState.$data.set(a),appState.$data.react(t=>{let e=`http://${appState.server}:${appState.port}/api/remits/${t}/220`,a=`http://${appState.server}:${appState.port}/api/remits/${t}/380`,i=`http://${appState.server}:${appState.port}/api/remits_centrali/${t}`;appState.dispatch("getRemit",[e]),appState.dispatch("getRemit",[a]),appState.dispatch("getRemit",[i])})}view({attrs:e,state:a}){return t(".bx--form-item",[t(".bx--date-picker.bx--date-picker--single[data-date-picker=''][data-date-picker-type='single']",t(".bx--date-picker-container",[t(r.a),t("input.bx--date-picker__input[data-date-picker-input=''][id='date-picker'][pattern='d{1,2}/d{1,2}/d{4}'][placeholder='dd/mm/yyyy'][type='text']"),t(".bx--number__controls",[t("button.bx--number__control-btn.up-icon",{onclick:()=>this.changeData(1)},t("svg[fill-rule='evenodd'][height='5'][viewBox='0 2 10 5'][width='10']",t("path[d='M10 5L5 0 0 5z']"))),t("button.bx--number__control-btn.down-icon",{onclick:()=>this.changeData(-1)},t("svg[fill-rule='evenodd'][height='5'][viewBox='0 2 10 5'][width='10']",t("path[d='M10 0L5 5 0 0z']")))]),t(".bx--form-requirement","Invalid date format.")]))])}changeData(t){let e=new Date(appState.$data.get().replace(/-/g,"/"));e.setDate(e.getDate()+t);let a=`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}`,i=`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`;this.picker.calendar.setDate(a),appState.$data.set(i)}oncreate(t){let e=t.dom.lastChild;t.picker=i.a.create(e,{dateFormat:"d-m-Y",locale:n.Italian,defaultDate:new Date(appState.$data.get().replace(/-/g,"/"))}),t.picker.calendar.config.onChange.push((t,e,a)=>{appState.$data.set(e)}),t.state.picker=t.picker}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){a(47);e.a=class{constructor(){}view({attrs:e}){return t(".burger",e,[t("#top"),t("#middle"),t("#bottom")])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){a(66);var i=a(15),n=a(40);e.a=class{constructor(){}view({attrs:e}){return"right"==e.type?t("nav.sidebar#sidebar_right",e,[void 0===appState.$lista_centrali.get()?"":t(n.a)]):t("nav.sidebar#sidebar_left",e,[void 0===appState.$remit_380.get()?"":t(i.a,{type:"linee",volt:"380"}),void 0===appState.$remit_220.get()?"":t(i.a,{type:"linee",volt:"220"}),void 0===appState.$remit_centrali.get()?"":t(i.a,{type:"centrali"})])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){var i=a(4),n=a(0);e.a=class{constructor(){}oninit({state:t}){t.id="etso",t.$filterOpt=Object(n.c)({get:()=>appState.dispatch("parseFilter",[appState.$filterUnita.get(),t.id]),set:t=>appState.$selectUnita.set(t)})}view({attrs:e,state:a}){return t(".bx--form-item",[t(i.a,{id:"#filtro_unita",placeholder:"Unita",data:a.$filterOpt,onchange:t=>a.$filterOpt.set(t)})])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){a(48);var i=a(2),n=a(19);e.a=class{constructor(){}view(){return t(i.a,{content:n.a,content_id:"filtro_unita",content_title:"Unita"})}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){var i=a(4),n=a(0);e.a=class{constructor(){}oninit({state:t}){t.id="impianto",t.$filterOpt=Object(n.c)({get:()=>appState.dispatch("parseFilter",[appState.$filterImpianto.get(),t.id]),set:t=>appState.$selectImpianto.set(t)})}view({state:e}){return t(".bx--form-item",[t(i.a,{id:"#filtro_impianto",placeholder:"Impianto",data:e.$filterOpt,onchange:t=>e.$filterOpt.set(t)})])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){a(49);var i=a(2),n=a(21);e.a=class{constructor(){}view(){return t(i.a,{content:n.a,content_id:"filtro_impianto",content_title:"Impianto"})}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){var i=a(4),n=a(0);e.a=class{constructor(){}oninit({state:t}){t.id="company",t.$filterOpt=Object(n.c)({get:()=>appState.dispatch("parseFilter",[appState.$filterSocieta.get(),t.id]),set:t=>appState.$selectSocieta.set(t)})}view({state:e}){return t(".bx--form-item",[t(i.a,{id:"#filtro_societa",placeholder:"Societa",data:e.$filterOpt,onchange:t=>e.$filterOpt.set(t)})])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){a(50);var i=a(2),n=a(23);e.a=class{constructor(){}view(){return t(i.a,{content:n.a,content_id:"filtro_societa",content_title:"Societa"})}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){var i=a(4),n=a(0);e.a=class{constructor(){}oninit({state:t}){t.id="sottotipo",t.$filterOpt=Object(n.c)({get:()=>appState.dispatch("parseFilter",[appState.$filterSottotipo.get(),t.id]),set:t=>appState.$selectSottotipo.set(t)})}view({state:e}){return t(".bx--form-item",[t(i.a,{id:"#filtro_sottotipo",placeholder:"Sottotipo",data:e.$filterOpt,onchange:t=>e.$filterOpt.set(t)})])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){a(53);var i=a(2),n=a(25);e.a=class{constructor(){}view(){return t(i.a,{content:n.a,content_id:"filtro_sottotipo",content_title:"Sottotipo"})}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){e.a=class{constructor(){}view({attrs:e}){return t("div",[t(`input.bx--radio-button[checked='${e.checked}']${e.state}[id='${e.id}'][name='radio-button'][tabindex='0'][type='radio'][value='${e.label}']`),t(`label.bx--radio-button__label[for='${e.id}']`,[t("span.bx--radio-button__appearance"),e.label])])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){var i=a(27),n=a(0);e.a=class{constructor(){}oninit({state:t}){t.combos=["ALL","SI","NO"],t.$filterOpt=Object(n.c)({get:()=>appState.dispatch("parseFilterMsd",[appState.$filterMsd.get()]),set:t=>appState.$msdComboValue.set(t)})}view({state:e}){return t(".bx--form-item",t(".bx--radio-button-group",{onchange:t=>e.$filterOpt.set(t.target.value)},e.combos.map(a=>{let n="bx--"+a.toLowerCase();return t(i.a,{id:n,label:a,state:this.checkenabled()?"":"[disabled=true]",checked:e.$filterOpt.get()===a||""})})))}checkenabled(){return 2==[...new Set(appState.filterTecnologia().map(t=>t.msd))].length}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){a(54);var i=a(2),n=a(28);e.a=class{constructor(){}view(){return t(i.a,{content:n.a,content_id:"filtro_msd",content_title:"Unit√† Abilitata MSD"})}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t,i){a(55);e.a=class{constructor(){}view({attrs:e}){return t(`.slider[id='${e.id}']`)}oncreate({attrs:t,state:e}){e.range=document.getElementById(`${t.id}`);for(var a=i.create(e.range,{start:t.pminpmax.get(),connect:!0,tooltips:!0,step:1,range:t.range,pips:{mode:"values",values:t.step,density:4,stepped:!0},format:{to:function(t){return parseInt(t)},from:function(t){return parseInt(t)}}}),n=e.range.querySelectorAll(".noUi-value"),r=0;r<n.length;r++)n[r].style.cursor="pointer",n[r].addEventListener("click",t=>this.clickOnPip(t));a.on("set",e=>{t.onchange(e)})}clickOnPip(t){var e=Number(t.target.getAttribute("data-value"));this.range.noUiSlider.set(e)}}}).call(this,a(1),a(56))},function(t,e,a){"use strict";(function(t){var i=a(12),n=a(30);e.a=class{constructor(){}oninit(){this.tecnologies=[{label:"Termico",stateChk:appState.$termicoVisibility,statePminPmax:appState.$termicoPminPmax,range:{min:0,max:1200},step:[0,200,400,600,800,1e3,1200]},{label:"Idrico",stateChk:appState.$idricoVisibility,statePminPmax:appState.$idricoPminPmax,range:{min:0,max:1200},step:[0,200,400,600,800,1e3,1200]},{label:"Eolico",stateChk:appState.$eolicoVisibility,statePminPmax:appState.$eolicoPminPmax,range:{min:0,max:300},step:[0,50,100,150,200,250,300]},{label:"Autoproduttore",stateChk:appState.$autoprodVisibility,statePminPmax:appState.$autoprodPminPmax,range:{min:0,max:300},step:[0,50,100,150,200,250,300]},{label:"Solare",stateChk:appState.$solareVisibility,statePminPmax:appState.$solarePminPmax,range:{min:0,max:300},step:[0,50,100,150,200,250,300]},{label:"Geotermico",stateChk:appState.$geotermicoVisibility,statePminPmax:appState.$geotermicoPminPmax,range:{min:0,max:300},step:[0,50,100,150,200,250,300]},{label:"Pompaggio",stateChk:appState.$pompaggiVisibility,statePminPmax:appState.$pompaggiPminPmax,range:{min:-1300,max:1300},step:[-1300,-850,-400,0,400,850,1300]}]}view({state:e}){return t("fieldset.bx--fieldset",[this.tecnologies.map(e=>{let a=e.label,r="bx--chechbox__"+a.toLowerCase(),o="bx--slider__"+a.toLowerCase();return t(".bx--form-item",[t(i.a,{id:r,label:a,checked:e.stateChk.get(),onchange:()=>e.stateChk.set(!e.stateChk.get())}),t(n.a,{id:o,pminpmax:e.statePminPmax,range:e.range,step:e.step,onchange:t=>e.statePminPmax.set(t)})])})])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){a(57);var i=a(2),n=a(31);e.a=class{constructor(){}view(){return t(i.a,{content:n.a,content_id:"filtro_tecnologia",content_title:"Tecnologia"})}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){var i=a(12);e.a=class{constructor(){}oninit(){this.checkboxs=[{label:"Linee 380",state:appState.$linee_380_visibility},{label:"Linee 220",state:appState.$linee_220_visibility}]}view({state:e}){return t("fieldset.bx--fieldset",[this.checkboxs.map(e=>{let a=e.label,n="bx--"+a.toLowerCase().replace(" ","-");return t(i.a,{id:n,label:a,checked:e.state.get(),onchange:()=>{e.state.set(!e.state.get())}})})])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){a(59);var i=a(2),n=a(33);e.a=class{constructor(){}view(){return t(i.a,{content:n.a,content_id:"filtro_linee",content_title:"Linee"})}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return i}));class i{view(e){return t.trust('<svg data-date-picker-icon class="bx--date-picker__icon" width="17" height="19" viewBox="0 0 17 19"><path d="M12 0h2v2.7h-2zM3 0h2v2.7H3z" /><path d="M0 2v17h17V2H0zm15 15H2V7h13v10z" /><path d="M9.9 15H8.6v-3.9H7.1v-.9c.9 0 1.7-.3 1.8-1.2h1v6z" /></svg>')}}}).call(this,a(1))},,function(t,e,a){"use strict";var i=a(14),n=a.n(i),r=a(10),o=a(9),s=a(8),c=a(7),l=a(13),p=a(3),u=(function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}})();function d(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}n.a.l10ns.en.weekdays.shorthand.forEach((function(t,e){var a=n.a.l10ns.en.weekdays.shorthand;"Thu"===a[e]||"Th"===a[e]?a[e]="Th":a[e]=a[e].charAt(0)}));var h=(function(t){function e(t,a){!(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e);var i=(function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));f.call(i);var n=i.element.getAttribute(i.options.attribType);return i.calendar=i._initDatePicker(n),i.manage(Object(p.a)(i.element,"keydown",(function(t){40===t.which&&i.calendar.calendarContainer.focus()}))),i.manage(Object(p.a)(i.calendar.calendarContainer,"keydown",(function(t){9===t.which&&"range"===n&&(i._updateClassNames(i.calendar),i.element.querySelector(i.options.selectorDatePickerInputFrom).focus())}))),i}return (function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,Object(o["a"])(s["a"],c["a"],l["a"])),u(e,[{key:"_rightArrowHTML",value:function(){return'\n      <svg width="8" height="12" viewBox="0 0 8 12" fill-rule="evenodd">\n        <path d="M0 10.6L4.7 6 0 1.4 1.4 0l6.1 6-6.1 6z"></path>\n      </svg>'}},{key:"_leftArrowHTML",value:function(){return'\n      <svg width="8" height="12" viewBox="0 0 8 12" fill-rule="evenodd">\n        <path d="M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z"></path>\n      </svg>'}},{key:"release",value:function(){if(this.calendar){try{this.calendar.destroy()}catch(t){}this.calendar=null}return (function t(e,a,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,a,i)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"release",this).call(this)}}],[{key:"options",get:function(){var t=r.a.prefix;return{selectorInit:"[data-date-picker]",selectorDatePickerInput:"[data-date-picker-input]",selectorDatePickerInputFrom:"[data-date-picker-input-from]",selectorDatePickerInputTo:"[data-date-picker-input-to]",selectorDatePickerIcon:"[data-date-picker-icon]",classCalendarContainer:t+"--date-picker__calendar",classMonth:t+"--date-picker__month",classWeekdays:t+"--date-picker__weekdays",classDays:t+"--date-picker__days",classWeekday:t+"--date-picker__weekday",classDay:t+"--date-picker__day",classFocused:t+"--focused",classVisuallyHidden:"bx--visually-hidden",attribType:"data-date-picker-type",dateFormat:"m/d/Y"}}}]),e})();h.components=new WeakMap;var f=function(){var t=this;this._handleFocus=function(){t.calendar&&t.calendar.open()},this._handleBlur=function(e){if(t.calendar){var a=e.relatedTarget;a&&(t.element.contains(a)||t.calendar.calendarContainer.contains(a))||t.calendar.close()}},this._initDatePicker=function(e){if("range"===e){var a=t.element.ownerDocument,i=a.createElement("input");i.className=t.options.classVisuallyHidden,a.body.appendChild(i),t._rangeInput=i;var r=a.defaultView,o="onfocusin"in r,s="onfocusout"in r,c=o?"focusin":"focus",l=s?"focusout":"blur";t.manage(Object(p.a)(t.element,c,t._handleFocus,!o)),t.manage(Object(p.a)(t.element,l,t._handleBlur,!s)),t.manage(Object(p.a)(a,"mousedown",(function(){t.calendar.isOpen&&(t.calendar.config.inline=!0,setTimeout((function(){t.calendar.config.inline=!1}),0))})))}var u=t,h="range"===e?t._rangeInput:t.element.querySelector(t.options.selectorDatePickerInput),f=t.options,m=f.onClose,b=f.onChange,g=f.onMonthChange,y=f.onYearChange,v=f.onOpen,_=f.onValueUpdate,w=new n.a(h,Object.assign(function(t){var e={};for(var a in t)e[a]=t[a];return e}(t.options),{allowInput:!0,mode:e,positionElement:"range"===e&&t.element.querySelector(t.options.selectorDatePickerInputFrom),onClose:function(t){for(var a=arguments.length,i=Array(a>1?a-1:0),n=1;n<a;n++)i[n-1]=arguments[n];m&&!1===m.call.apply(m,[this,t].concat(d(i)))||(u._updateClassNames(w),u._updateInputFields(t,e))},onChange:function(){for(var t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];b&&!1===b.call.apply(b,[this].concat(d(a)))||(u._updateClassNames(w),"range"===e&&(1===w.selectedDates.length&&w.isOpen?u.element.querySelector(u.options.selectorDatePickerInputTo).classList.add(u.options.classFocused):u.element.querySelector(u.options.selectorDatePickerInputTo).classList.remove(u.options.classFocused)))},onMonthChange:function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];g&&!1===g.call.apply(g,[this].concat(d(e)))||u._updateClassNames(w)},onYearChange:function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];y&&!1===y.call.apply(y,[this].concat(d(e)))||u._updateClassNames(w)},onOpen:function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];v&&!1===v.call.apply(v,[this].concat(d(e)))||u._updateClassNames(w)},onValueUpdate:function(){for(var t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];_&&!1===_.call.apply(_,[this].concat(d(a)))||"range"!==e||u._updateInputFields(u.calendar.selectedDates,e)},nextArrow:t._rightArrowHTML(),prevArrow:t._leftArrowHTML()}));return"range"===e&&(t._addInputLogic(t.element.querySelector(t.options.selectorDatePickerInputFrom),0),t._addInputLogic(t.element.querySelector(t.options.selectorDatePickerInputTo),1)),t.manage(Object(p.a)(t.element.querySelector(t.options.selectorDatePickerIcon),"click",(function(){w.open()}))),t._updateClassNames(w),"range"!==e&&t._addInputLogic(h),(function(t){var e=t._;return e&&(e.changeEvent&&(e._changeEvent=e.changeEvent),Object.defineProperty(e,"changeEvent",{get:function(){return this._changeEvent},set:function(t){t.detail=Object.assign(t.detail||{},{fromFlatpickr:!0}),this._changeEvent=t}})),t})(w)},this._addInputLogic=function(e,a){if(!isNaN(a)&&(a<0||a>1))throw new RangeError("The index of <input> ("+a+") is out of range.");var i=e;t.manage(Object(p.a)(i,"change",(function(e){if(!e.detail||!e.detail.fromFlatpickr){var n=t.calendar.parseDate(i.value);if(n&&!isNaN(n.valueOf()))if(isNaN(a))t.calendar.setDate(n);else{var r=t.calendar.selectedDates;r[a]=n,t.calendar.setDate(r)}}t._updateClassNames(t.calendar)}))),t.manage(Object(p.a)(i,"keydown",(function(e){var a=t.calendar._input;t.calendar._input=e.target,setTimeout((function(){t.calendar._input=a}))})))},this._updateClassNames=function(e){var a=e.calendarContainer;a.classList.add(t.options.classCalendarContainer),a.querySelector(".flatpickr-month").classList.add(t.options.classMonth),a.querySelector(".flatpickr-weekdays").classList.add(t.options.classWeekdays),a.querySelector(".flatpickr-days").classList.add(t.options.classDays),[].concat(d(a.querySelectorAll(".flatpickr-weekday"))).forEach((function(e){var a=e;a.innerHTML=a.innerHTML.replace(/\s+/g,""),a.classList.add(t.options.classWeekday)})),[].concat(d(a.querySelectorAll(".flatpickr-day"))).forEach((function(a){a.classList.add(t.options.classDay),a.classList.contains("today")&&e.selectedDates.length>0?a.classList.add("no-border"):a.classList.contains("today")&&0===e.selectedDates.length&&a.classList.remove("no-border")}))},this._updateInputFields=function(e,a){"range"===a?2===e.length?(t.element.querySelector(t.options.selectorDatePickerInputFrom).value=t._formatDate(e[0]),t.element.querySelector(t.options.selectorDatePickerInputTo).value=t._formatDate(e[1])):1===e.length&&(t.element.querySelector(t.options.selectorDatePickerInputFrom).value=t._formatDate(e[0])):1===e.length&&(t.element.querySelector(t.options.selectorDatePickerInput).value=t._formatDate(e[0])),t._updateClassNames(t.calendar)},this._formatDate=function(e){return t.calendar.formatDate(e,t.calendar.config.dateFormat)}};e.a=h},function(t,e,a){"use strict";(function(t){a(62);var i=a(16),n=a(2);e.a=class{constructor(){}oninit({attrs:t,state:e}){}view({attrs:e,state:a}){return t(n.a,{content:i.a,content_id:"filtro_data",content_title:"Data"})}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";var i=a(10),n=a(9),r=a(8),o=a(7),s=a(13),c=a(5),l=a(3),p=(function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}})();var u=(function(t){function e(t,a){!(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e);var i=(function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return i.manage(Object(l.a)(i.element,"click",(function(t){var e=Object(c.a)(t,i.options.selectorAccordionItem);e&&!Object(c.a)(t,i.options.selectorAccordionContent)&&i._toggle(e)}))),i._checkIfButton()||i.manage(Object(l.a)(i.element,"keypress",(function(t){Object(c.a)(t,i.options.selectorAccordionItem)&&!Object(c.a)(t,i.options.selectorAccordionContent)&&i._handleKeypress(t)}))),i}return (function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,Object(n["a"])(r["a"],o["a"],s["a"])),p(e,[{key:"_checkIfButton",value:function(){return"BUTTON"===this.element.firstElementChild.firstElementChild.nodeName}},{key:"_handleKeypress",value:function(t){13!==t.which&&32!==t.which||this._toggle(t.target)}},{key:"_toggle",value:function(t){var e=t.querySelector(this.options.selectorAccordionItemHeading),a=e.getAttribute("aria-expanded");null!==a&&e.setAttribute("aria-expanded","true"===a?"false":"true"),t.classList.toggle(this.options.classActive)}}],[{key:"options",get:function(){var t=i.a.prefix;return{selectorInit:"[data-accordion]",selectorAccordionItem:"."+t+"--accordion__item",selectorAccordionItemHeading:"."+t+"--accordion__heading",selectorAccordionContent:"."+t+"--accordion__content",classActive:t+"--accordion__item--active"}}}]),e})();u.components=new WeakMap,e.a=u},function(t,e,a){"use strict";(function(t){a(63);var i=a(39),n=a(38),r=a(34),o=a(32),s=a(29),c=a(26),l=a(24),p=a(22),u=a(20);e.a=class{constructor(){}view({attrs:e,state:a}){return t(".filtri",[t("ul.bx--accordion[data-accordion='']",[t(n.a),t(r.a),t(o.a),t(s.a),t(c.a),t(l.a),t(p.a),t(u.a)])])}oncreate(t){let e=t.dom.firstElementChild;i.a.create(e)}}}).call(this,a(1))},function(t,e,a){"use strict";var i=a(10),n=a(9),r=a(8),o=a(7),s=a(5),c=(function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}})();var l=(function(t){function e(t,a){!(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e);var i=(function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e})(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return i._getClass=function(t){return{expandable:i.options.classExpandedTile,clickable:i.options.classClickableTile,selectable:i.options.classSelectableTile}[t]},i._hookActions=function(t){var e="expandable"===i.tileType;if(e){var a=i.element.querySelector(i.options.selectorAboveTheFold),n=i.element.ownerDocument.defaultView.getComputedStyle(i.element,null),r=parseInt(n.getPropertyValue("padding-top"),10)+parseInt(n.getPropertyValue("padding-bottom"),10);a&&(i.tileHeight=i.element.getBoundingClientRect().height,i.atfHeight=a.getBoundingClientRect().height+r,i.element.style.maxHeight=i.atfHeight+"px")}i.element.addEventListener("click",(function(a){Object(s.a)(a,i.options.selectorTileInput)||i.element.classList.toggle(t),e&&i._setTileHeight()})),i.element.addEventListener("keydown",(function(a){var n=i.element.querySelector(i.options.selectorTileInput);13!==a.which&&32!==a.which||e||(i.element.classList.toggle(t),n.checked=!n.checked)}))},i._setTileHeight=function(){var t=i.element.classList.contains(i.options.classExpandedTile);i.element.style.maxHeight=t?i.tileHeight+"px":i.atfHeight+"px"},i.tileType=i.element.dataset.tile,i.tileHeight=0,i.atfHeight=0,i._hookActions(i._getClass(i.tileType)),i}return (function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,Object(n["a"])(r["a"],o["a"])),c(e,[{key:"release",value:function(){(function t(e,a,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,a,i)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"release",this).call(this)}}],[{key:"options",get:function(){var t=i.a.prefix;return{selectorInit:"[data-tile]",selectorAboveTheFold:"[data-tile-atf]",selectorTileInput:"[data-tile-input]",classExpandedTile:t+"--tile--is-expanded",classClickableTile:t+"--tile--is-clicked",classSelectableTile:t+"--tile--is-selected"}}}]),e})();l.components=new WeakMap,e.a=l},function(t,e,a){"use strict";(function(t){a(67);var i=a(41);e.a=class{constructor(){this._legendItem=[{label:"Linee 380",color:"#7FCED8",class:"legend__key--linee"},{label:"Linee 220",color:"#9B02A3",class:"legend__key--linee"},{label:"Termico",color:"#E30202",class:"legend__key--tecno"},{label:"Eolico",color:"#7202E0",class:"legend__key--tecno"},{label:"Idrico",color:"#03A8A8",class:"legend__key--tecno"},{label:"Autoproduttore",color:"#CB689A",class:"legend__key--tecno"},{label:"Solare",color:"#CB6203",class:"legend__key--tecno"},{label:"Pompaggi",color:"#03D838",class:"legend__key--tecno"},{label:"Geotermico",color:"#643201",class:"legend__key--tecno"}]}view({attrs:e}){return t(".legend.map-overlay.bx--tile.bx--tile--expandable[data-tile='expandable'][tabindex='0']",[t("button.bx--tile__chevron",t("svg[fill-rule='evenodd'][height='8'][viewBox='0 0 12 8'][width='12']",t("path[d='M1.4 7.5L6 2.8l4.6 4.7L12 6.1 6 0 0 6.1z']"))),t(".bx--tile-content",[t("span.bx--tile-content__above-the-fold.legend__head.bx--type-zeta[data-tile-atf='Legenda']","LEGENDA"),this._legendItem.map(e=>{let a="legend__key--linee"==e.class?{style:{"background-color":e.color}}:{style:{"border-color":e.color}};return t(".legend__item",[t(`span.bx--tile-content__below-the-fold.legend__key.${e.class}`,a),t(".legend__item__label.bx--type-omega",e.label)])})])])}oncreate(t){let e=t.dom;t.tile=i.a.create(e)}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t,i){a(68);var n,r=a(6),o=a.n(r),s=a(0),c=a(42);e.a=class{constructor(){this._server=window.location.hostname,this._accessToken="pk.eyJ1IjoiYnJvd3NlcmlubyIsImEiOiJjajIzYXRmNnQwMDBuMndwODl1MTdjdG1yIn0.FJ-S1md8BPQtSwTF4SZsMA"}handleVisibilityUnita(){appState.$etsoVisibility.react(t=>{let e=["in","nome"],a=["in","etso"];t.length>0&&t.map(t=>{e.push(t),a.push(t)}),n.setFilter("centrali",a),n.setFilter("remit_centrali",e)},{skipFirst:!0})}handleVisibilityLinee(){appState.$linee_380_visibility.react(t=>{let e=0==t?"none":"visible";["linee-380","linee-380 blur","remit_380"].map(t=>{n.setLayoutProperty(t,"visibility",e)},{skipFirst:!0})}),appState.$linee_220_visibility.react(t=>{let e=0==t?"none":"visible";["linee-220","linee-220 blur","remit_220"].map(t=>{n.setLayoutProperty(t,"visibility",e)},{skipFirst:!0})})}handleRefreshRemitLinee(){appState.$remit_380.react(t=>{n.getSource("remit_380").setData(t)},{skipFirst:!0}),appState.$remit_220.react(t=>{n.getSource("remit_220").setData(t)},{skipFirst:!0})}handleRefreshRemitCentrali(){appState.$remit_centrali.react(t=>{n.getSource("remit_centrali").setData(t)},{skipFirst:!0})}handleSelectLine(){appState.$selectLine.react(t=>{let e=t.geometry.coordinates;!(function(){let t=e[0],a=e[e.length-1],i=[],r=[];t[0]<a[0]?(i[0]=t[0],r[0]=a[0]):(i[0]=a[0],r[0]=t[0]),t[1]<a[1]?(i[1]=t[1],r[1]=a[1]):(i[1]=a[1],r[1]=t[1]);let s=new o.a.LngLatBounds(i,r);n.fitBounds(s,{padding:200,maxZoom:10})})(),(function(){let a=Math.trunc(e.length/2),i=document.getElementsByClassName("mapboxgl-popup");i[0]&&i[0].remove(),(new o.a.Popup).setLngLat(e[a]).setHTML("<b>"+t.properties.nome+"</b><br><b>update: </b>"+t.properties.dt_upd+"<br><b>start: </b>"+t.properties.start_dt+"<br><b>end:  </b>"+t.properties.end_dt+"<br>").addTo(n)})()},{skipFirst:!0})}handleSelectCentrale(){appState.$selectCentrale.react(t=>{let e=t.geometry.coordinates;n.flyTo({center:e,zoom:12,speed:1.7,curve:1.2,easing:t=>t})},{skipFirst:!0})}handleResetZoom(){document.querySelector("button.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass").addEventListener("click",()=>{n.flyTo({center:[11.88,42.13],zoom:5.6,bearing:0,pitch:0,speed:1.2,curve:1.1,easing:function(t){return t}})},!1)}initMap(){o.a.accessToken=this._accessToken,n=new o.a.Map({container:"mapid",style:"mapbox://styles/browserino/cjhpwzyrx3ymw2smgsezxdwra?optimize=true",center:[11.88,42.13],zoom:5.6,maxZoom:13,minZoom:5.3});let t=new o.a.NavigationControl;n.addControl(t,"bottom-right")}initRemit(){n.getLayer("remit_380")||this.addLayerRemitLinee("380"),n.getLayer("remit_220")||this.addLayerRemitLinee("220"),n.getLayer("remit_centrali")||this.addLayerRemitCentrali()}initAnimation(){let e=[[0,4,3],[1,4,2],[2,4,1],[3,4,0],[0,1,3,3],[0,2,3,2],[0,3,3,1]],a=100,i=0,r=0,o=e.length,c=20,l=3,p=l,u=1,d=u,h=Object(s.a)(5.6),f=Object(s.b)(()=>{let t=h.get();return-.06*Math.pow(t,2)+1.14*t-2.68});n.on("zoom",()=>h.set(n.getZoom())),t.setSimulationTimestep(70),t.setUpdate((function(t){(i+=t/a)>=o&&(i=0),p+=(f.get()-p)/c,(d-=.9/c)<.2&&(p=l,d=u)})).setDraw((function(t){let a=parseInt(i);r!=a&&(n.setPaintProperty("remit_380","line-dasharray",e[a]),n.setPaintProperty("remit_220","line-dasharray",e[a]),r=a),n.setPaintProperty("remit_centrali","circle-stroke-width",p),n.setPaintProperty("remit_centrali","circle-stroke-opacity",d)})).start()}addLayerRemitLinee(t){if("380"==t)var e="remit_380",a="#FFFF00",i=appState.$remit_380.get();else e="remit_220",a="#FFFF00",i=appState.$remit_220.get();n.addLayer({id:e,type:"line",source:{type:"geojson",data:void 0===i?{type:"FeatureCollection",features:[]}:i},paint:{"line-color":a,"line-opacity":1,"line-width":{base:1,stops:[[6,2],[14,3]]},"line-dasharray":[0,4,3]}})}addLayerRemitCentrali(){var t=appState.$remit_centrali.get();n.addSource("remit_centrali",{type:"geojson",data:void 0===t?{type:"FeatureCollection",features:[]}:t}),n.addLayer({id:"remit_centrali",type:"circle",source:"remit_centrali",paint:{"circle-color":{base:1,type:"categorical",property:"tipo",stops:[["TERMICO","#E0090C"],["EOLICO","#5907AB"],["IDRICO","#04A1A1"],["AUTOPRODUTTORE","#9E577C"],["SOLARE","#9E4F0B"],["POMPAGGIO","#0E952F"],["GEOTERMICO","#7E4F21"]]},"circle-stroke-color":"#FFFF00","circle-stroke-opacity":1,"circle-stroke-width":2,"circle-opacity":1,"circle-radius":{base:1,type:"exponential",property:"pmax",stops:[[{value:0,zoom:4},4],[{value:0,zoom:6},6],[{value:3e3,zoom:6},24],[{value:0,zoom:8},11],[{value:3e3,zoom:8},33],[{value:0,zoom:13},13],[{value:3e3,zoom:13},36]],default:10}}})}initHoverEffect(){this.addHoverEffect("380"),this.addHoverEffect("220")}addHoverEffect(t){if("380"==t)var e="hover_380",a="tileset_transmission_380",i="mapbox://browserino.cjcb6ahdv0daq2xnwfxp96z9t-142vr",r="transmission_380",o="linee-380";else e="hover_220",a="tileset_transmission_220",i="mapbox://browserino.cjcfb90n41pub2xp6liaz7quj-69qt1",r="transmission_220",o="linee-220";n.addSource(a,{type:"vector",url:i}),n.addLayer({id:e,type:"line",source:a,layout:{},interactive:!0,"source-layer":r,maxzoom:13,paint:{"line-color":"#88CC55","line-width":3},filter:["==","nome",""]}),n.on("mouseover",o,(function(t){n.getCanvas().style.cursor="pointer";var a=[[t.point.x-5,t.point.y-5],[t.point.x+5,t.point.y+5]],i=n.queryRenderedFeatures(a,{layers:[o]});if(i.length)if(i.length){n.getCanvas().style.cursor="pointer";let t=i[0];n.setFilter(e,["==","nome",t.properties.nome])}else n.setFilter(e,["==","nome",""])})),n.on("mouseout",o,(function(){n.getCanvas().style.cursor="",n.setFilter(e,["==","nome",""])}))}initShowPopUp(){this.addShowPopUp("380"),this.addShowPopUp("220"),this.addShowPopUp("centrale")}addShowPopUp(t){if("380"==t)var e="linee-380";else e="220"==t?"linee-220":"centrali";n.on("click",(function(t){var a=[[t.point.x-2,t.point.y-2],[t.point.x+2,t.point.y+2]],i=n.queryRenderedFeatures(a,{layers:[e]});if(!i.length)return;let r=(function(t){if("centrali"==t.layer.id)var e="<b>"+t.properties.etso+"</b><br><b>Company: </b>"+t.properties.company+"<br><b>Impianto: </b>"+t.properties.impianto+"<br><b>Operatore: </b>"+t.properties.operatore+"<br><b>Proprietario: </b>"+t.properties.proprietario+"<br><b>Localita: </b>"+t.properties.localita+"<br><b>Tecnologia: </b>"+t.properties.tipo+" ("+t.properties.sottotipo+")<br><b>Sottotipo: </b>"+t.properties.sottotipo+"<br><b>Msd: </b>"+t.properties.msd+"<br><b>Pmin: </b>"+t.properties.pmin+"<br><b>Pmax: </b>"+t.properties.pmax+"<br>";else var e="<b>"+t.properties.nome+"</b><br><b>From: </b>"+t.properties.p1+"<br><b>To: </b>"+t.properties.p2+"<br><b>Lunghezza: </b>"+t.properties.lunghezza+"<br><b>Voltage: </b>"+t.properties.voltage+"<br>";return e})(i[0]);new o.a.Popup({offset:[0,-5]}).setLngLat(t.lngLat).setHTML(r).addTo(n)}))}view({attrs:t}){return i("#mapid",t,i(c.a))}oncreate({attrs:t,state:e}){this.initMap(),n.on("load",()=>{this.initRemit(),this.initHoverEffect(),this.initShowPopUp(),this.handleVisibilityLinee(),this.handleVisibilityUnita(),this.handleRefreshRemitLinee(),this.handleRefreshRemitCentrali(),this.initAnimation()}),this.handleSelectLine(),this.handleSelectCentrale(),this.handleResetZoom()}}}).call(this,a(69),a(1))},function(t,e,a){"use strict";(function(t){var i=a(43);e.a=class{constructor(){}view({attrs:e}){return t("#main",e,t(i.a))}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";(function(t){e.a=class{constructor(){}_toggleSideBar(t){"left"==t?appState.sidebarLeft=!appState.sidebarLeft:appState.sidebarRight=!appState.sidebarRight}_hideSideBar(){appState.sidebarLeft&&appState.dispatch("hideSidebar",["left"]),appState.sidebarRight&&appState.dispatch("hideSidebar",["right"])}view({attrs:e,state:a}){return t("#layout",[t(e.sidebarLeft,{class:(appState.sidebarLeft?"active":"")+" left",type:"left"}),t(e.burgerLeft,{class:(appState.sidebarLeft?"active":"")+" left",onclick:()=>{a._toggleSideBar("left")}}),t(e.sidebarRight,{class:(appState.sidebarRight?"active":"")+" right",type:"right"}),t(e.burgerRight,{class:(appState.sidebarRight?"active":"")+" right",onclick:()=>{a._toggleSideBar("right")}}),t(e.remitTransmission)])}oncreate({attrs:t,state:e}){}}}).call(this,a(1))},function(t,e,a){"use strict";a.r(e);a(75),a(74),a(70)},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,a){"use strict";(function(t){var e=a(45),i=a(44),n=a(18),r=a(17);t.route.prefix(""),t.route(document.getElementById("app"),"/",{"/":{render:()=>t(e.a,{remitTransmission:i.a,sidebarLeft:n.a,burgerLeft:r.a,sidebarRight:n.a,burgerRight:r.a})}})}).call(this,a(1))},,,,function(t,e,a){"use strict";(function(t){var e=a(0);window.appState=new class{constructor(){this._modelName=this.constructor.name,this.server=window.location.hostname,this.port=80,this.sidebarLeft=!1,this.sidebarRight=!1,this.$data=Object(e.a)(),this.$selectLine=Object(e.a)(),this.$selectCentrale=Object(e.a)(),this.$linee_380_visibility=Object(e.a)(!0),this.$linee_220_visibility=Object(e.a)(!0),this.$termicoVisibility=Object(e.a)(!0),this.$eolicoVisibility=Object(e.a)(!0),this.$idricoVisibility=Object(e.a)(!0),this.$autoprodVisibility=Object(e.a)(!0),this.$solareVisibility=Object(e.a)(!0),this.$pompaggiVisibility=Object(e.a)(!0),this.$geotermicoVisibility=Object(e.a)(!0),this.$termicoPminPmax=Object(e.a)([0,1200]),this.$eolicoPminPmax=Object(e.a)([0,300]),this.$idricoPminPmax=Object(e.a)([0,1200]),this.$autoprodPminPmax=Object(e.a)([0,300]),this.$solarePminPmax=Object(e.a)([0,300]),this.$pompaggiPminPmax=Object(e.a)([-1300,1300]),this.$geotermicoPminPmax=Object(e.a)([0,300]),this.$msdComboValue=Object(e.a)("ALL"),this.$lista_centrali=Object(e.a)(this.fetchCentrali()),this.$filterMsd=Object(e.b)(()=>this.filterMsd(this.filterTecnologia(),this.$msdComboValue.get())),this.$filterSottotipo=Object(e.b)(()=>this.$filterMsd.get()),this.$selectSottotipo=Object(e.a)([]),this.$filterSocieta=Object(e.b)(()=>this.filterUnita(this.$filterSottotipo.get(),this.$selectSottotipo.get(),"sottotipo")),this.$selectSocieta=Object(e.a)([]),this.$filterImpianto=Object(e.b)(()=>this.filterUnita(this.$filterSocieta.get(),this.$selectSocieta.get(),"company")),this.$selectImpianto=Object(e.a)([]),this.$filterUnita=Object(e.b)(()=>this.filterUnita(this.$filterImpianto.get(),this.$selectImpianto.get(),"impianto")),this.$selectUnita=Object(e.a)([]),this.$unitaVisibility=Object(e.b)(()=>this.filterUnita(this.$filterUnita.get(),this.$selectUnita.get(),"etso")),this.$etsoVisibility=Object(e.b)(()=>this.$unitaVisibility.get().map(t=>t.etso)),this.$remit_220=Object(e.a)(),this.$remit_380=Object(e.a)(),this.$remit_centrali=Object(e.a)(),this.$remitCentraliFiltered=Object(e.b)(()=>this.filterRemitCentrali())}dispatch(t,e){return this[t].apply(this,e||[])}filterTecnologia(){if(void 0===this.$lista_centrali.get())return[];let t=[];this.$termicoVisibility.get()&&t.push({tipo:"TERMICO",pmin:this.$termicoPminPmax.get()[0],pmax:this.$termicoPminPmax.get()[1]}),this.$eolicoVisibility.get()&&t.push({tipo:"EOLICO",pmin:this.$eolicoPminPmax.get()[0],pmax:this.$eolicoPminPmax.get()[1]}),this.$idricoVisibility.get()&&t.push({tipo:"IDRICO",pmin:this.$idricoPminPmax.get()[0],pmax:this.$idricoPminPmax.get()[1]}),this.$autoprodVisibility.get()&&t.push({tipo:"AUTOPRODUTTORE",pmin:this.$autoprodPminPmax.get()[0],pmax:this.$autoprodPminPmax.get()[1]}),this.$solareVisibility.get()&&t.push({tipo:"SOLARE",pmin:this.$solarePminPmax.get()[0],pmax:this.$solarePminPmax.get()[1]}),this.$pompaggiVisibility.get()&&t.push({tipo:"POMPAGGIO",pmin:this.$pompaggiPminPmax.get()[0],pmax:this.$pompaggiPminPmax.get()[1]}),this.$geotermicoVisibility.get()&&t.push({tipo:"GEOTERMICO",pmin:this.$geotermicoPminPmax.get()[0],pmax:this.$geotermicoPminPmax.get()[1]});let e=t.length,a=this.$lista_centrali.get(),i=a.length,n=[];for(let r=0;r<i;r++){let i=a[r];for(let a=0;a<e;a++){let e=t[a],r="POMPAGGIO"===i.tipo?i.pmin:i.pmax;if(i.tipo===e.tipo&&r>=e.pmin&&i.pmax<=e.pmax){n.push(i);break}}}return n}filterUnita(t,e,a){if(0==e.length)return t;let i=[],n=t.length;for(let r=0;r<n;r++){let n=t[r];-1!=e.indexOf(n[a])&&i.push(n)}return i}filterRemitCentrali(){let t=this.$remit_centrali.get();if(void 0===t)return;let e=this.$etsoVisibility.get();return t.features.filter(t=>e.includes(t.properties.nome))}parseFilter(t,e){return[...new Set(t.map(t=>t[e]))].map(t=>new Object({value:t,text:t}))}filterMsd(t,e){return"ALL"==e?t:t.filter(t=>t.msd==e)}parseFilterMsd(t){let e=[...new Set(t.map(t=>t.msd))];return 2==e.length?"ALL":e[0]}fetchCentrali(){t.request({method:"GET",url:`http://${this.server}:${this.port}/api/lista_centrali`}).then(t=>{this.$lista_centrali.set(t)}).catch(t=>{console.log("Errore richiesta json lista centrali",t)})}getRemit(e){t.request({method:"GET",url:e}).then(t=>{switch(e){case String(e.match(/.*remits_centrali.*/)):this.$remit_centrali.set(t);break;case String(e.match(/.*\/remits\/.*\/220/)):this.$remit_220.set(t);break;case String(e.match(/.*\/remits\/.*\/380/)):this.$remit_380.set(t);break;default:console.log("Didn't match")}}).catch(t=>{console.log(`Errore richiesta json remit  ${e}`,t)})}}}).call(this,a(1))},function(t,e){},function(t,e,a){t.exports=a(46)}],[[76,0,1]]]);